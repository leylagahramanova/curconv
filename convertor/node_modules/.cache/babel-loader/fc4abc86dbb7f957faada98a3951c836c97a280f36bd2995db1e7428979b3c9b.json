{"ast":null,"code":"import _slicedToArray from\"C:/Projects/CurseConvertor/convertor/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// App.js\nimport React,{useCallback,useEffect}from'react';import'./App.css';import{Block}from'./Block';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState('RUB'),_React$useState2=_slicedToArray(_React$useState,2),fromCurrency=_React$useState2[0],setFromCurrency=_React$useState2[1];var _React$useState3=React.useState('USD'),_React$useState4=_slicedToArray(_React$useState3,2),toCurrency=_React$useState4[0],setToCurrency=_React$useState4[1];var _React$useState5=React.useState(1),_React$useState6=_slicedToArray(_React$useState5,2),toPrice=_React$useState6[0],setToPrice=_React$useState6[1];var _React$useState7=React.useState(0),_React$useState8=_slicedToArray(_React$useState7,2),fromPrice=_React$useState8[0],setFromPrice=_React$useState8[1];var ratesRef=React.useRef({});var onChangeFromPrice=useCallback(function(value){var price=value/ratesRef.current[fromCurrency];var result=price*ratesRef.current[toCurrency];setToPrice(result.toFixed(3));setFromPrice(value);},[fromCurrency,toCurrency]);var onChangeToPrice=useCallback(function(value){var result=ratesRef.current[fromCurrency]/ratesRef.current[toCurrency]*value;setFromPrice(result.toFixed(3));setToPrice(value);},[fromCurrency,toCurrency]);useEffect(function(){fetch('https://data.fixer.io/api/latest?access_key=07a6302e05b1162c8b5855f155fb2b70').then(function(res){return res.json();}).then(function(json){ratesRef.current=json.rates;onChangeToPrice(1);}).catch(function(err){console.warn(err);alert('Failed to get information');});},[onChangeToPrice]);React.useEffect(function(){onChangeFromPrice(fromPrice);},[fromCurrency,fromPrice,onChangeFromPrice]);React.useEffect(function(){onChangeToPrice(toPrice);},[toCurrency,toPrice,onChangeToPrice]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Block,{value:fromPrice,currency:fromCurrency,onChangeCurrency:setFromCurrency,onChangeValue:onChangeFromPrice}),/*#__PURE__*/_jsx(Block,{value:toPrice,currency:toCurrency,onChangeCurrency:setToCurrency,onChangeValue:onChangeToPrice})]});}export default App;","map":{"version":3,"names":["React","useCallback","useEffect","Block","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","fromCurrency","setFromCurrency","_React$useState3","_React$useState4","toCurrency","setToCurrency","_React$useState5","_React$useState6","toPrice","setToPrice","_React$useState7","_React$useState8","fromPrice","setFromPrice","ratesRef","useRef","onChangeFromPrice","value","price","current","result","toFixed","onChangeToPrice","fetch","then","res","json","rates","catch","err","console","warn","alert","className","children","currency","onChangeCurrency","onChangeValue"],"sources":["C:/Projects/CurseConvertor/convertor/src/App.js"],"sourcesContent":["// App.js\nimport React, { useCallback, useEffect } from 'react';\nimport './App.css';\nimport { Block } from './Block';\n\nfunction App() {\n  const [fromCurrency, setFromCurrency] = React.useState('RUB');\n  const [toCurrency, setToCurrency] = React.useState('USD');\n  const [toPrice, setToPrice] = React.useState(1);\n  const [fromPrice, setFromPrice] = React.useState(0);\n  const ratesRef = React.useRef({});\n\n  const onChangeFromPrice = useCallback((value) => {\n    const price = value / ratesRef.current[fromCurrency];\n    const result = price * ratesRef.current[toCurrency];\n    setToPrice(result.toFixed(3));\n    setFromPrice(value);\n  }, [fromCurrency, toCurrency]);\n\n  const onChangeToPrice = useCallback((value) => {\n    const result =\n      (ratesRef.current[fromCurrency] / ratesRef.current[toCurrency]) * value;\n    setFromPrice(result.toFixed(3));\n    setToPrice(value);\n  }, [fromCurrency, toCurrency]);\n\n  useEffect(() => {\n    fetch('https://data.fixer.io/api/latest?access_key=07a6302e05b1162c8b5855f155fb2b70')\n      .then((res) => res.json())\n      .then((json) => {\n        ratesRef.current = json.rates;\n        onChangeToPrice(1);\n      })\n      .catch((err) => {\n        console.warn(err);\n        alert('Failed to get information');\n      });\n  }, [onChangeToPrice]);\n\n  React.useEffect(() => {\n    onChangeFromPrice(fromPrice);\n  }, [fromCurrency, fromPrice, onChangeFromPrice]);\n\n  React.useEffect(() => {\n    onChangeToPrice(toPrice);\n  }, [toCurrency, toPrice, onChangeToPrice]);\n\n  return (\n    <div className=\"App\">\n      <Block\n        value={fromPrice}\n        currency={fromCurrency}\n        onChangeCurrency={setFromCurrency}\n        onChangeValue={onChangeFromPrice}\n      />\n      <Block\n        value={toPrice}\n        currency={toCurrency}\n        onChangeCurrency={setToCurrency}\n        onChangeValue={onChangeToPrice}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}